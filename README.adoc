# Garage Client

## TODO

 - Smarter upload process
 - Handle trailing slash on URLs correctly

## Developing

Getting started:

    sudo apt-get install build-essential cmake g++ libboost-dev libboost-program-options-dev libboost-filesystem-dev libboost-system-dev libcurl4-gnutls-dev clang clang-format-3.6 ninja-build
    mkdir build
    cd build
    cmake -DCMAKE_BUILD_TYPE=Debug ..
    make
    ./garage-push --help

Generate tags

    make tags

Before commiting, run the pre-commit checks:

    make qa

This will reformat all the code with clang-format and run clang-check and the test suite.
Please follow the https://google.github.io/styleguide/cppguide.html[Google C++ Style Guide] coding standard.

## Tests

Running the tests is as simple as:

    make qa

Some of the tests require an Auth+ account. These are disabled by default, and can be enabled by setting the following properties, either in the cmake GUI, by passing `-D AUTH_PLUS_TEST_CLIENT_ID= -D AUTH_PLUS_TEST_CLIENT_SECRET=...` to cmake, or by editing CMakeCache.txt to set the following options:

    # In CMakeCache.txt
    //Client ID for testing Auth+ authentication
    AUTH_PLUS_TEST_CLIENT_ID:STRING=....

    //Client Secret for testing Auth+ authentication
    AUTH_PLUS_TEST_CLIENT_SECRET:STRING=...

## Dockerfile

A Dockerfile is provided to check that the list of package dependencies is
up-to-date.  For day-to-day development it is recommended to build
`garage-push` in your native environment.

To build inside docker:

    docker build -t garage-tools-build .
    docker run -ti -v $PWD:/src garage-tools-build
    mkdir build
    cd build
    cmake -DCMAKE_BUILD_TYPE=Debug /src
    make qa

// vim: set tabstop=4 shiftwidth=4 expandtab:
